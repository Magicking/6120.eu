<!doctype html><html lang=en>
<head>
<title>StarkNet Phase 1 - Freebox Validator :: 6120's Notes</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="My experience running a StarkNet validator on a Freebox router during Phase 1, including challenges and learnings">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=https://6120.eu/posts/starknet-staking-p1/>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-81JJNV4Z09"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-81JJNV4Z09',{anonymize_ip:!1})}</script>
<link rel=stylesheet href=https://6120.eu/styles.css>
<link rel="shortcut icon" href=https://6120.eu/img/theme-colors/black.png>
<link rel=apple-touch-icon href=https://6120.eu/img/theme-colors/black.png>
<meta name=twitter:card content="summary">
<meta name=twitter:site content="https://6120.eu">
<meta name=twitter:creator content>
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="StarkNet Phase 1 - Freebox Validator">
<meta property="og:description" content="My experience running a StarkNet validator on a Freebox router during Phase 1, including challenges and learnings">
<meta property="og:url" content="https://6120.eu/posts/starknet-staking-p1/">
<meta property="og:site_name" content="6120's Notes">
<meta property="og:image" content="https://6120.eu/img/favicon/black.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">
<meta property="article:published_time" content="2023-02-03 19:00:03 +0100 +0100">
</head>
<body>
<div class=black>
<div class=fuzz></div>
<div class="container center headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=/>
<div class=logo>
Magicking's notes
</div>
</a>
</div>
</div>
</header>
<div class=content>
<article class=post>
<h1 class=post-title>
<a href=https://6120.eu/posts/starknet-staking-p1/>StarkNet Phase 1 - Freebox Validator</a>
</h1>
<div class=post-meta>
<time class=post-date>
2023-02-03 ::
[Updated :: 2023-02-03]
</time>
<span class=post-reading-time>:: 3 min read (522 words)</span>
</div>
<span class=post-tags>
#<a href=https://6120.eu/tags/starknet/>starknet</a>&nbsp;
#<a href=https://6120.eu/tags/cairo/>cairo</a>&nbsp;
</span>
<div class=post-content><div>
<h2 id=introduction>Introduction<a href=#introduction class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p><a href=https://www.starknet.io/blog/staking-phase-1/>StarkNet staking 1st phase</a> consist of solely running a full RPC node, at the time of writing, staking ask for 20_000 Strk tokens (~3700$). As there is no validator duties linking performance and reward it&rsquo;s an ideal moment to start scaling from the bottom.</p>
<p>As a minimum viable product I choose a Virtual Machine (VM) running on my Internet Service Provider(ISP) router Freebox, because it&rsquo;s a system that cost me almost nothing, always running and can host VMs.</p>
<h2 id=hardware-setup>Hardware Setup<a href=#hardware-setup class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>The Freebox Delta router, while primarily designed for home networking, surprisingly packs enough punch for our needs. Under the hood, it features a Quad-Core Armv8 Cortex A-72 processor and 2GB of RAM, which while modest, proved sufficient for our initial testing phase. The storage setup: two Crucial BX500 SATA SSDs in a 1TB RAID1 configuration.</p>
<h2 id=initial-setup-and-challenges>Initial Setup and Challenges<a href=#initial-setup-and-challenges class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Getting the StarkNet full node up and running on the Freebox was an exercise in resource optimization. The initial state synchronization proved to be the first major hurdle, with the limited RAM requiring careful memory management. The process took several days to complete, with the node frequently hitting memory limits during peak synchronization periods. Network bandwidth, while not a primary concern give the Freebox&rsquo;s gigabit connection a low latency, and needed careful monitoring to ensure it didn&rsquo;t impact household internet usage.</p>
<h2 id=validator-implementation>Validator Implementation<a href=#validator-implementation class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>The validator setup was surprisingly straightforward once the full node was operational as there was no implementation existing (Note, there are now 2 implementation existing). Monitoring was handled through a combination of Prometheus and Grafana, giving us real-time insights into the node&rsquo;s performance and health.</p>
<h2 id=performance-analysis>Performance Analysis<a href=#performance-analysis class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>During normal operation, the Freebox validator handled block processing adequately, maintaining sync with the network without issues. However, the limitations became apparent during high transaction volume periods. The quad-core ARM processor, while efficient, struggled to keep up with the computational demands of processing large blocks during network congestion. This was particularly evident during High TPS events(TBD screenshot), where transaction throughput would spike dramatically.</p>
<h2 id=lessons-learned>Lessons Learned<a href=#lessons-learned class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>The Freebox experiment taught us several valuable lessons about validator requirements. While the setup worked for Phase 1&rsquo;s basic requirements, it highlighted the importance of having headroom for processing power during network stress. The RAID1 storage setup proved fine, but the 2GB RAM limitation was a constant challenge. For future phases, we&rsquo;ll need to consider more powerful hardware for full node, and separate signers particularly as validator duties become active.</p>
<h2 id=next-steps>Next Steps<a href=#next-steps class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>Moving forward, we&rsquo;re considering several options to improve our setup. A dedicated mini-PC with more RAM and a more powerful processor would be the logical next step, while still maintaining the cost-effectiveness that made the Freebox experiment appealing. We&rsquo;re also exploring ways to optimize the node software to better handle high-throughput periods.</p>
<h2 id=conclusion>Conclusion<a href=#conclusion class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<p>The Freebox validator experiment was a valuable learning experience in Phase 1 of StarkNet&rsquo;s staking journey. While the hardware limitations prevented optimal performance during high-stress periods, it successfully demonstrated that running a validator doesn&rsquo;t require expensive enterprise-grade equipment. The experience has given us valuable insights into the minimum requirements for future phases and helped us identify areas for improvement in our setup.</p>
</div></div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://6120.eu/posts/cairo-changelog-pov/>
<span class=button__icon>←</span>
<span class=button__text>StarkNet & Cairo significant changes developer opinionated view</span>
</a>
</span>
<span class="button next">
<a href=https://6120.eu/posts/support-evm/>
<span class=button__text>Support cours Ethereum Virtual Machine</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//6120s-blog.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</article>
</div>
<footer class=footer>
<div class=footer__inner>
<div class="copyright copyright--user">
<span> </span>
</div>
</div>
</footer>
<script type=text/javascript src=/bundle.min.js></script>
</div>
</div>
</body>
<script></script>
</html>